#include"form.nvgt"
namespace nvform {
	class custom_button: nv_form_button {
		custom_button(nv_form@parent) {
			super(@parent, "press this now", "click");
		}
		void on_fire() {
			alert("ok", "it works: "+this.pressed);
		}
	}

}
void main() {
	nvform::nv_form f;
	speak("It works");
	nvform::custom_button my_button(f);
	f.create_window("Test", say_dialog = true);
	f.add_control(my_button);
	//now we create a basic button with a callback registered to it.
	nvform::nv_form_button@btn = f.add_button("Press this other button here", "testbtn", cancel = true, callback = on_x_click);
	//now we create a legacy style button, setting it as the primary control.
	f.add_button("Speak something", "speak");
	f.add_checkbox("Uncheck this", "box", true);
	while(true) {
		wait(5);
		if(!f.monitor()) {
			alert("ok", "time to exit this application");
			break;
		}
		if(f.is_pressed("speak")) {
			speak("Legacy buttons work!", false);
			continue;
		}
	}
}
bool on_x_click(nvform::nv_form_control@ctrl) {
	alert("ok", "goodbye");
	exit();
	return true;
}